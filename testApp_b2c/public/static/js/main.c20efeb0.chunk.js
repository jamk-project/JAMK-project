(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(t,e,a){"use strict";a.r(e);var n=a(1),i=a.n(n),o=a(25),s=a.n(o),c=a(21),r=(a(51),a(15)),l=a(16),u=a(19),m=a(17),p=a(20),d=a(26),b=a(78),f=a.n(b),g=function(t){function e(){var t,a;Object(r.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={oldcampaigns:!1,startDate:a.props.startDate,endDate:a.props.endDate,datepickerRange:!0,adDataToggle:!0},a.toggleOldCampaings=function(){a.setState(function(t){return{oldcampaigns:!t.oldcampaigns,datepickerRange:!1}})},a.toggleAdData=function(){a.setState(function(t){return{adDataToggle:!0,datepickerRange:!1}})},a.openForm=function(){window.open("https://bislenz.com/markkinointi_aikajanalla/docendoBn=BR9qgkA/lomakeSt+Y2AR$.html")},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.campaignData.facebookAdData,e=this.props.campaignData.googleAdData,a=this.props.notes,n=document.getElementById("info-box"),i=document.getElementById("info-content");document.getElementById("timeline","info-box button").onclick=function(o){(o.target.classList.contains("vis-item")||o.target.classList.contains("vis-item-content"))&&(i.innerHTML="",n.style.display="block",function(t,e){return t.map(function(t){return t[e]}).map(function(t,e,a){return a.indexOf(t)===e&&e}).filter(function(e){return t[e]}).map(function(e){return t[e]})}(t,[5]).map(function(t){return t[4].includes(o.target.innerText)&&(void 0===t[9]?i.innerHTML+="<li><b>Mainos: "+t[7]+"</b></li><p>"+t[8]+"</p>":i.innerHTML+="<li><b>Mainos: "+t[7]+"</b></li><p>"+t[8]+"</p><img src='"+t[9]+"'/>"),null}),function(t,e){return t.map(function(t){return t[e]}).map(function(t,e,a){return a.indexOf(t)===e&&e}).filter(function(e){return t[e]}).map(function(e){return t[e]})}(e,[5]).map(function(t){return t[4].includes(o.target.innerText)&&(" --"!==t[7]&&""!==t[7]||" --"!==t[9]&&""!==t[9]?" --"===t[7]||""===t[7]?i.innerHTML+="<li><b>Mainosryhm\xe4: "+t[6]+"</b></li><p>"+t[8]+"</p><img src='"+t[9]+"'/>":" --"===t[9]||""===t[9]?i.innerHTML+="<li><b>Mainosryhm\xe4: "+t[6]+"</b></li><p>"+t[8]+"</p>":i.innerHTML+="<li><b>Mainos: "+t[7]+"</b></li><p>"+t[8]+"</p><img src='"+t[9]+"'/>":i.innerHTML+="<li><b>Mainosryhm\xe4: "+t[6]+"</b></li><p>"+t[8]+"</p>"),null}),a.map(function(t){return t.content===o.target.innerText&&(i.innerHTML+="<b> "+t.content+"</b><p>"+t.text+"</p>"),null}))}}},{key:"componentDidUpdate",value:function(t){var e=document.getElementById("info-box"),a=document.getElementById("info-content");!0===this.state.adDataToggle?(a.innerHTML="",e.style.display="none"):(a.innerHTML="",e.style.display="block"),this.props.startDate===t.startDate&&this.props.endDate===t.endDate||this.setState({datepickerRange:!0})}},{key:"render",value:function(){var t=this.props.startDate.getFullYear(),e=this.props.startDate.getMonth()+1,a=this.props.startDate.getDate(),n=this.props.endDate.getFullYear(),o=this.props.endDate.getMonth()+1,s=this.props.endDate.getDate();e<10&&(e="0".concat(e)),a<10&&(a="0".concat(a)),o<10&&(o="0".concat(o)),s<10&&(s="0".concat(s));var c={tooltip:{followMouse:!0},zoomMax:1e11,zoomMin:13e8,start:"".concat(t,"-").concat(e,"-").concat(a),end:"".concat(n,"-").concat(o,"-").concat(s)},r=[].concat(Object(d.a)(this.props.gcampaigns),Object(d.a)(this.props.fbcampaigns));r=r.filter(function(t){return"enabled"===t.status||"ACTIVE"===t.status||"paused"===t.status||"PAUSED"===t.status||"COMPLETED"===t.status});var l,u=(r=[].concat(Object(d.a)(r),Object(d.a)(this.props.notes))).filter(function(t){return"enabled"===t.status||"ACTIVE"===t.status||"auki"===t.status});return l=!1===this.state.oldcampaigns?u:r,i.a.createElement("div",null,i.a.createElement("div",{id:"timeline"},i.a.createElement(f.a,{options:!0===this.state.datepickerRange?c:{tooltip:{followMouse:!0},zoomMax:1e11,zoomMin:13e8},groups:[{id:0,content:"Google"},{id:1,content:"Facebook"},{id:3,content:"Omat merkinn\xe4t"}],items:l})),i.a.createElement("div",{className:"timelinecontrols"},i.a.createElement("div",{id:"green",className:"box"}),i.a.createElement("span",{className:"boxtext"}," Google"),i.a.createElement("div",{id:"blue",className:"box"}),i.a.createElement("span",{className:"boxtext"}," Facebook"),i.a.createElement("div",{id:"yellow",className:"box"}),i.a.createElement("span",{className:"boxtext"}," Oma merkint\xe4"),i.a.createElement("div",{id:"red",className:"box"}),i.a.createElement("span",{className:"boxtext"}," ","Ep\xe4aktiivinen",i.a.createElement("button",{id:"toggleactivebtn",onClick:this.toggleOldCampaings},!1===this.state.oldcampaigns?"N\xe4yt\xe4":"Piilota")),i.a.createElement("button",{className:"timelinebtn",onClick:this.openForm},i.a.createElement("b",null,"+ Lis\xe4\xe4 oma merkint\xe4 "))),i.a.createElement("div",{id:"info-box",className:"info-box-style"},i.a.createElement("button",{id:"xbtn",className:"timelinebtn",onClick:this.toggleAdData},"Sulje"),i.a.createElement("div",{id:"info-content"})))}}]),e}(i.a.Component),h=function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;setTimeout(function(){t.forceUpdate()},1e3)}},{key:"render",value:function(){var t=this.props.campaignData.google.map(function(t){return" --"===t[6]&&"paused"===t[4]?{group:0,id:t[0],status:t[4],start:new Date(t[5]),content:t[3],title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - Ei m\xe4\xe4ritetty\xe4 p\xe4\xe4ttymisaikaa",className:"paused"}:"paused"===t[4]?{group:0,id:t[0],status:t[4],start:new Date(t[5]),end:new Date(t[6]),content:t[3],className:"paused",title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - "+t[6]}:" --"===t[6]||""===t[6]?{group:0,id:t[0],status:t[4],start:new Date(t[5]),end:new Date,content:t[3],title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - Ei m\xe4\xe4ritetty\xe4 p\xe4\xe4ttymisaikaa",className:"activeg"}:{group:0,id:t[0],status:t[4],start:new Date(t[5]),end:new Date(t[6]),content:t[3],title:'<b style="font-size: 0.75em">'+t[0]+"</b><br>"+t[3]+" - "+t[4],className:"activeg"}}),e=this.props.campaignData.facebook.map(function(t){return void 0===t[6]&&"ACTIVE"!==t[4]?{group:1,id:t[0],status:t[4],start:new Date(t[5]),content:t[3],title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - Ei m\xe4\xe4ritetty\xe4 p\xe4\xe4ttymisaikaa",className:"paused"}:"ACTIVE"!==t[4]?{group:1,id:t[0],status:t[4],start:new Date(t[5]),end:new Date(t[6]),content:t[3],className:"paused",title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - "+t[6]}:void 0===t[6]||""===t[6]?{group:1,id:t[0],status:t[4],start:new Date(t[5]),end:new Date,content:t[3],title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - Ei m\xe4\xe4ritetty\xe4 p\xe4\xe4ttymisaikaa",className:"active"}:{group:1,id:t[0],status:t[4],start:new Date(t[5]),end:new Date(t[6]),content:t[3],title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - "+t[6],className:"active"}}),a=this.props.campaignData.notes.map(function(t){return{group:3,id:t[0],status:t[4],start:new Date(t[5]),end:new Date(t[6]),content:t[3],title:'<b style="font-size: 0.75em">'+t[3]+"</b><br>"+t[5]+" - "+t[6],text:t[7],className:"note"}});return i.a.createElement("div",{className:"frame"},this.props.campaignDataFetched?i.a.createElement("div",null,i.a.createElement("h3",null,"Kampanjat"),i.a.createElement(g,{campaignData:this.props.campaignData,gcampaigns:t,fbcampaigns:e,notes:a,startDate:this.props.startDate,endDate:this.props.endDate})):i.a.createElement("div",null,i.a.createElement("h3",null,"Kampanjat"),i.a.createElement("div",{className:"ui active centered inline loader"})))}}]),e}(n.Component),D=a(49),v=(a(202),function(t){function e(){var t,a;Object(r.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={startDate:new Date(new Date-2592e6),endDate:new Date},a.handleUpdate=function(){var t={start:a.state.startDate,end:a.state.endDate};a.props.dateChanged(t)},a.handleStartChange=function(t){a.setState({startDate:a.getDateWithoutTime(t)})},a.handleEndChange=function(t){a.setState({endDate:a.getDateWithoutTime(t)})},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"getDateWithoutTime",value:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n));var i="".concat(e,"-").concat(a,"-").concat(n);return new Date(i)}},{key:"render",value:function(){return i.a.createElement("div",{id:"timerangepicker"},i.a.createElement(D.a,{className:"pvm",selected:this.state.startDate,onChange:this.handleStartChange}),i.a.createElement("span",null," - "),i.a.createElement(D.a,{className:"pvm",selected:this.state.endDate,onChange:this.handleEndChange}),i.a.createElement("button",{className:" button pvm",onClick:this.handleUpdate},"P\xe4ivit\xe4 aikajanat"))}}]),e}(n.Component)),E=function(t){var e={start:new Date(new Date-2592e6),end:new Date},a=Object(n.useState)(e),o=Object(c.a)(a,2),s=o[0],r=o[1],l=Object(n.useState)([]),u=Object(c.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(!1),b=Object(c.a)(d,2),f=b[0],g=b[1];Object(n.useEffect)(function(){D(),window.history.replaceState({},"Home page","/")},[]);var D=function(){var t={};fetch("https://test-2bc-react-express2201.azurewebsites.net/api/campaigns").then(function(t){return t.json()}).then(function(e){t.google=e.map(function(t){return"googleads"===t.datasource&&1===t.client_id?Object.values(t):null}),t.google=t.google.filter(function(t){return null!==t}),t.facebook=e.map(function(t){return"facebookads"===t.datasource&&1===t.client_id?Object.values(t):null}),t.facebook=t.facebook.filter(function(t){return null!==t}),t.notes=e.map(function(t){return"note"===t.datasource&&1===t.client_id?Object.values(t):null}),t.notes=t.notes.filter(function(t){return null!==t}),fetch("https://test-2bc-react-express2201.azurewebsites.net/api/ads").then(function(t){return t.json()}).then(function(e){t.googleAdData=e.map(function(t){return"googleads"===t.datasource&&1===t.client_id?Object.values(t):null}),t.googleAdData=t.googleAdData.filter(function(t){return null!==t}),t.facebookAdData=e.map(function(t){return"facebookads"===t.datasource&&1===t.client_id?Object.values(t):null}),t.facebookAdData=t.facebookAdData.filter(function(t){return null!==t}),p(t),g(!0)})})};return i.a.createElement("div",{className:"App"},i.a.createElement("div",null,i.a.createElement("div",{className:"nav"},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(v,{dateChanged:function(t){r(t)}})))),f?i.a.createElement(h,{campaignDataFetched:f,campaignData:m,startDate:s.start,endDate:s.end}):null))},k=function(){var t=Object(n.useState)(""),e=Object(c.a)(t,2),a=e[0],o=e[1];Object(n.useEffect)(function(){var t=window.location.hash;t&&o(t.split("=")[1])},[]);return a?i.a.createElement(E,{token:a}):i.a.createElement("button",{onClick:function(){window.location.href="https://dilemmatenanttest01.b2clogin.com/dilemmatenanttest01.onmicrosoft.com/oauth2/v2.0/authorize?p=B2C_1_dima-authtest&client_id=f69536ab-07ea-450c-af9b-be7b804c5629&nonce=defaultNonce&redirect_uri=https%3A%2F%2Ftest-2bc-react-express2201.azurewebsites.net&scope=openid&response_type=id_token&prompt=login"},className:"nav"},"Login!")};s.a.render(i.a.createElement(k,null),document.getElementById("root"))},51:function(t,e,a){},82:function(t,e,a){t.exports=a(203)}},[[82,1,2]]]);
//# sourceMappingURL=main.c20efeb0.chunk.js.map